\chapter{Background}\label{background}


\begin{quote} \emph{"This project aims to build a Blockchain based system to
  manage the identity of patients and investigating the suitability of creating
  such a system in the Healthcare environment according to objective criteria.
  While Blockchain is not a new concept at this point, it is an evolving
  technology that is being used to solve old problems with new approaches while
  at the same time creating new application fields and challenging old
  conventions and methodologies. This Chapter will provide an overview of this
  technology and some of its most prominent implementations. Finally, some
  context is given to how technology has been helping the Healthcare industry
  to enable better management of their patients identity."}
\end{quote}

\section{Starting Concepts}

Blockchain is an abstract concept, being a collection of cryptographic and
network technologies orchestrated. It can be used to refer to the Bitcoin's
Blockchain or refer to forks of the Bitcoin's Blockchain called
Altchains~\cite{Lewis2015} that share many characteristics but may have
different features, purposes and even alternative implementations of the
technology. Some forks improved upon the original premise to result in
platforms that allow execution of code in an autonomous manner, exactly as it
was programmed, with no human intervention.

A Blockchain is, generally speaking, a continuously growing list of records
being written in the ledger, a structure where all records are written and
stored, that is constantly being replicated across a network of peers, in
opposition to having a single central record history, making it a good example
of a distributed database~\cite{Barclay2017}.

The purpose of a Blockchain is to estabilish trust between different
participating parties in a network of distributed systems without the need for
a middle man~\cite{Drescher2017}. To fulfill this purpose it uses cryptographic
techniques and digital signatures to not only verify the authenticity of
records but also as a way to manage read or write access to the network and as
proof that a record was written in the ledger and was never tampered with,
creating an immutable history of records, that benefits various use cases as
discussed later in this document.

Unlike a conventional database system running in a server, where only a single
entity keeps a copy of the underlying database, making it centralized by
design, the ledger of the Blockchain is constantly replicated across any number
of participating nodes in the network~\cite{Lewis2015} in a regular cadence
defined at the network genesis. In some implementations, not every participant
has the same ability to interact with the ledger and in this respect a
Blockchain can be permissionless or permissioned. Generally speaking, in a
permissionless Blockchain every node of the network can write in the ledger
whereas in a permissioned Blockchain only a select group of entities have
access to writing in the ledger, making the permissioned version, by default
secure, if the entities themselves who manage the network are considered secure
and trustworthy by the participants in the
network~\cite{Lewis2015,Valenta2017}.

But then, how does a permissionless Blockchain maintain security if every
participant in the network has access to writing on it, including potentially
malicious parties?

Given that participating nodes in a public network can belong to different and
often competing parties, there is no implied trust between them, so the
Blockchain needs a mechanism to ensure the integrity of the ledger and prevent
malicious meddling from interested parties and avoiding the need for a central
authority~\cite{Barclay2017}.  Take for example the Bitcoin Blockchain that
uses a peer-to-peer network to avoid the requirement of a third party being
involved in a financial transaction such as a financial institution or a middle
man, which must be trusted with the details of a transaction to see it
through~\cite{Nakamoto2008}.

Consensus is a mechanism employed by the Blockchain to solve this problem.
Even though consensus mechanisms can behave vastly different, depending on its
implementation and purpose, they are at the core a solution to create
immutability and ensure resiliency by ensuring the majority of the network
agrees upon the sequence of events.  For example, in the Bitcoin's Blockchain
case, consensus is reached by the longest chain rule where the longest chain of
blocks not only serves as proof of the sequence of events witnessed, but as
proof that it came from the largest pool of computing power, as it uses a proof
of work (\textbf{pow}) algorithm that relies on brute force to solve a complex
mathematical puzzle, making the longest chain of blocks the one with the most
computing power behind it and therefore agreed upon by the majority of the
network~\cite{Baars2016,Wood2017} making it the most likely to be the one that
represents the sequence of events witnessed.

There have been however, environmental and economic reasons to replace
\textbf{pow} consensus algorithms. Nowadays the cryptocurrency mining, forms a
billion dollar industry with an estimated consumption of 288 megawatts and in
2016, 70\% of the Bitcoin's computational power was located in China.
Unfortunately, the vast majority of electricity in the country is produced by
burning coal, resulting in one of the biggest carbon footprints in the
world~\cite{BitcoinMining2017}. In response to this environmental and eventual
economic concern over the sustainability of the mining incentives, there have
been a few alternative algorithms that have eventually appeared. Proof of Stake
(\textbf{pos}), for example, is a consensus algorithm that was first suggested
on the Bitcointalk forum back in 2011. It is currently in use in various
currencies as their consensus algorithm and the first digital currency to use
this method was Peercoin in 2012. 

Rather than requiring the peers to perform a certain amount of computational
work, a proof of stake system requires the validators to show ownership of a
certain amount of money. Any participating peer in the network can become a
validator by sending a special type of transaction that locks their money in a
deposit, defined as the stake. The creator of a new block is chosen in a
deterministic way, depending on its wealth and other factors depending on the
specific \textbf{pos} implementation. Then validators participate in the
process of creating and agreeing to new blocks by taking turns voting.  However
\textbf{pos} based consensus algorithms have proven to be difficult to
implement~\cite{EthereumSlasher2014} in a way that still provides the needed
security for a large Blockchain network. Due to this some Blockchain platforms
are also considering implementing a mix of \textbf{pow} and \textbf{pos}
algorithm.

In the case of a permissioned Blockchain implementation, interactions are made
among a set of known, identified participants who have a common goal, but do
not fully trust each other. By relying on the identities of peers, a
permissioned Blockchain can use a more traditional Byzantine-fault tolerant
(\textbf{bft}) consensus algorithm.

While the Blockchain, we now know today, was conceptualized as the public
ledger for the Bitcoin cryptocurrency in 2008 by Satoshi Nakamoto and
implemented in 2009, many are now using it as a foundation across a variety of
application areas such as traceability, asset management and
Healthcare~\cite{MIT2016}.

\section{Developments in Healthcare}\label{blockchainHealthcare}

Originally records of a patient were stored in paper, a physical format.
Thanks to the advent of the computers more and more records are stored on a
digital format and the Electronic Health Record (EHR) was created.
\cite{Marquez2017}  This benefits handling of information between the patient
and the medical professionals and medical institutions.\cite{ONCoordinator2017}
But first we must discuss what is defined as identity in this specific case.

Identity is a construct that depends on the context.  Identity can be defined
as the characteristics determining who or what a person is.  In this paper we
define identity as the set of characteristics that determine who is the patient
in the given Healthcare ecosystem they belong to, such as, the name, the age,
the cellphone number, the gender and the birth date of the patient.  Electronic
Health Records encapsulate this information in digital format, however, they
are usually represented in a format according to the Information System they
were designed to work with.

To enable interoperability, standards for EHRs were created and many failed to
bring the much needed consensus that was required for interoperability between
different Information Systems in different institutions.  \cite{Eichelberg2006}
Health Level 7 has done much work to be recognized in many countries and is
quickly being implemented in many countries to allow for joint efforts between
organizations. \cite{HL7Anual2016}

Even with these advances in mind, the nature of many clinics and hospitals
Information Systems makes the management of their patients identity a very
cumbersome, costly and risky affair to handle.  Security in a connected age,
where access to the world wide web is easily available, is lagging behind and
presenting some problems.  There is also the question of transparent use of
information by the organizations that store it.

Thanks to the roaring success of Bitcoin and the increasingly apparent use
cases that the Blockchain can provide, various industries and the general
public are becoming interested in this technological advance that is laying the
foundation for a change in the underlying flow of our economic and social
systems~\cite{Zago2018,	Marr2018,Long2018}. Some companies have already started
developing Blockchain applications in the Healthcare field and established some
key partnerships.

Guardtime, has fully deployed their system in 2008, started cooperating in 2011
and in 2016 announced a partnership with the Estonian Government, where a
million patient records are now secured by the strategy and, until today, still
proves the resilience of the Blockchain technology, as well as, other advances
in cryptography.  Now other companies like Verizon are becoming interested in
this technology for their own
purposes~\cite{GuardTime2018,EstonianGovernmentGuardTime2016}.

Another company, Gem, is collaborating with Phillips Healthcare to explore
options in this area, and is opting to solve the interoperability problem with
an additional layer of abstraction they call GemOS.  Factom, another
Blockchain-based service, has also announced a partnership with a major US
medical services provider
HealthNautica~\cite{BlockchainCompHealth2017,FactomPartnership2017}.

The use of the Blockchain technology in the health field is expanding. Just
recently a new platform appeared, called Medichain that allows patients to
store their own data in a secure way and give anonymized access to this data to
specialists. Giving data allows for users to gain tokens that represent
value~\cite{MediChain2018}.

Even tough many Blockchain-based solutions are still very early on development
or deployment and many projects do not actually materialize, the disruption
potential of this technology is clear. It is an area that is very strictly
regulated and has major privacy concerns. Any solution proposed must take into
consideration this criteria.

\section{Blockchain as a Platform}

Due to Bitcoin getting extensive media coverage, the average public awareness
in cryptocurrencies is shown to be rising~\cite{BitAwareness2017}. While
Blockchain is used as a means to increase the resiliency of the Bitcoin
cryptocurrency from malicious parties, a token is used to represent the coin. 

Just like a Dollar it has no value by itself, it has value only because we
agree to trade goods and services in exchange for a higher amount of the
currency under our control and we believe others will do the same
\cite{aliessi2016}. Through the years Blockchain has evolved to be capable of
being an independent development platform using the token as a means to reward
those who maintain the consensus by spending electricity and computation power
in the network. In some networks like Ethereum one can build upon the network
to create Decentralized Applications (\textbf{Ðapps}) that allow logic to be
executed in an autonomous manner~\cite{Wood2017}. 

In the same manner that the Bitcoin Blockchain can be seen as an adding
machine, the Ethereum Blockchain can be seen as a computer able to execute
programs designed for it~\cite{Wood2015}.

Ethereum is an open-source platform based on the Blockchain technology that
enables developers to build and deploy \textbf{Ðapps}. Ethereum is being
developed by the Ethereum Foundation and was first discussed by Buterin in
2013.  Ethereum intends to provide a Blockchain with a built-in programming
language that is used to create smart contracts~\cite{Wood2017}.

A Blockchain that supports Bitcoin style transactions enables asset transfers
between parties that do not trust each other. A Blockchain that supports smart
contracts however, takes this further and allows for multi-step interactions to
occur between mutually distrustful parties.Nick Szabo introduced this concept
in 1994 and defined a smart contract as "a computerized transaction protocol
that executes the terms of a contract"~\cite{Christidis2016}. 

Smart contracts can translate contractual clauses into a piece of code,
embedding it into property hardware, or software that can self-enforce them ,
in order to minimize the need for trusted intermediaries between transacting
parties, and the occurence of malicious or accidental exceptions. In a
Blockchain, smart contracts are scripts that describe the logic of any system
that developers can imagine and are stored on the Blockchain where they execute
as “autonomous agents” and where they can be instantiated and invoked as needed
after achieving consensus.  Since they reside on the network, they have a
unique address. A smart contract is invoked by addressing a transaction to it.
It then executes independently and automatically in a prescribed manner,
according to the data that was included in the invoking transaction. Smart
contracts allow us to have general purpose computations occur on the chain.
They offer an abstract layer of interaction with the ledger doing away with the
a required background in coding cryptography, mathematics as well as
significant resources to program Blockchain
applications~\cite{Wood2017,BlockGeeks2017}.

The Ethereum Blockchain is a permissionless Blockchain, and thus, it must have
a consensus mechanism to ensure the validation process of every record and, in
turn, ensure resiliency and immutability. While other implementations of the
Blockchain have different consensus mechanics, in Ethereum’s case, all
participants have to reach consensus over the order of all transactions that
have taken place. If a definitive order cannot be established then a
double-spend~\footnote{Double-spending is a potential flaw in a digital cash
scheme in which the same single digital token can be spent more than once.
This is possible because a digital token consists of a digital file that can be
duplicated or falsified. As with counterfeit money, such double-spending leads
to inflation by creating a new amount of fraudulent currency that did not
previously exist. This devalues the currency relative to other monetary units,
and diminishes user trust as well as the circulation and retention of the
currency.} might have occurred and the transaction is rejected~\cite{Wood2017}.

\section{Blockchain for Enterprise}

Hyperledger Fabric (\textbf{hlf}) is part of the Hyperledger project started in
December 2015 by the Linux Foundation, and is an open-source developer-focused
community of communities focused on the development of enterprise-grade,
open-source Blockchain-based solutions.  Fabric is an implementation of a
Distributed Ledger Platform (\textbf{dlp}) under the Hyperledger
umbrella~\cite{Cachin2016}.

Hyperledger Fabric’s initial commit was contributed by IBM and written in the
Go programming language.  It is a permissioned Blockchain and its main design
goal was to surpass previous Blockchain implementation limitations, such as,
lack of true private transactions and confidential contracts.

These goals are achieved thanks to assigning peers in the network three
distinct roles and by offering the ability to create channels each with its own
private ledger.  A peer can have the role of endorser, committer or consenter
or sometimes multiple roles.  Hyperledger Fabric is intended as a foundation
for developing applications in a modular fashion, opting for a plug-and-play
approach to its various components as well as its consensus
mechanism~\cite{HyperledgerFabricDocs2017}.

Hyperledger Fabric, as discussed, also allows the creation of smart contracts
which can be written in Chaincode.  Given that this Blockchain's key
operational requirement is privacy, featuring true private transactions and
confidential contracts, it makes this technology a great asset for a business
environment where sensitive information must be handled with care and disclosed
on a case by case basis.  Thanks to its modular approach consensus protocols
are no longer hard-coded and trust models can be repurposed.

Hyperledger Burrow (\textbf{hlb}) is also part of the Hyperledger project and
its development started in 2014 by Monax and sponsored by Intel. It is a
permissionable smart contract machine written in Go and offers a modular
Blockchain client with a permissioned smart contract interpreter built, in
part, to the specification of the Ethereum Virtual Machine (\textbf{evm}) with
the client having, essentially, three main components, the consensus engine,
the permissioned \textbf{evm} and the Remote Procedure Call (\textbf{rpc})
gateway~\cite{Kuhlman2017,HyperledgerBurrow2017}.

Hyperledger Burrow has its own Consensus Engine, the Byzantine fault-tolerant
Tendermint protocol.  The Tendermint protocol is an open-source effort that
allows high performance in solving the consensus problem and also has a
flexible interface for building arbitrary applications above the consensus, as
well as, a suite of tools for deployments and their
management~\cite{Buchman2016}.
